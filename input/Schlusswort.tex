\section{Schlusswort} \label{sec:schlusswort}

Dieses Kapitel besteht noch aus einzelnen Argumenten und Abschnitten und ist noch nicht miteinander verknüpft

\textbf{a) Was läuft?Was wurde im Projekt erreicht? Welche in der Aufgabenstellung gestellten Anforderungen wurden realisiert? Wo wurden diese übertroffen?}
Der Dōjō wurde ursprünglich in einem kleinen hohlen Stab konzeptioniert. In dieser ersten Entwicklungsphase wurde ein Prototyp realisiert, welcher optisch an und für sich nichts mit dem Dōjō zu tun hat, sondern lediglich die Funktionalität der Elektronik im Vordergrund steht. Der grosszügige Aufbau hat den Vorteil, dass sich einzelne Komponenten wie z.B. die Ladeschaltung für die Energiespeicherung, Mikrocontroller auf einem Evaluation Board oder der Knochenschallaktor als einzelne Teilsystem getestet und in einem weiteren Schritt zu einem Gesamtsystem zusammenbauen lassen. Diese Vorgehensweise ermöglichte eine saubere und effiziente Arbeitstrennung. Nach dem alle Komponenten dimensioniert und getestet wurden, konnte ein fertiges in den Dojo passendes PCB Design erstellt werden, welches in einem weiteren Schritt in den Dōjō eingebaut werden könnte.
 
<<<<<<< HEAD
Das Gesamtsystem umfasst hierbei die Hardwarekomponenten wie induktive Ladeschaltung, Batterie, Microcontroller, sowie notwendige Komponenten für die Audioausgabe. Die Software beinhaltet alle programmierbaren Ebenen wie die State Machine, aber auch die Audio PWM Ausgabe, das Bluetooth und die Programmierung des Nordic SDK.
Die Erkennung der Bluetooth-Beacons funktioniert einwandfrei, solange nicht mehr als 10 Beacons in unmittelbarer Nähe sind. Das Detektieren erfolgt über die Software. Mit einem geeigneten Algorithmus wird jeweils das Beacon mit dem stärksten Signal als das\glqq korrekte\grqq Kunstobjekt identifiziert. Das integrierte Bluetooth-Modul im Mikrocontroller ermöglicht das Empfangen der entsprechenden Beacon-ID und kann diese über eine geeignete Funktion in eine Hexadezimal-Zahl wandeln. Anschliessend wird mit einer ID-Liste auf der SD-Karte verglichen und bei Übereinstimmung das entsprechende Audio-File abgespielt.\\
Die induktive Ladung funktioniert einwandfrei und ermöglicht eine Stromübertragung von maximal 70mA. Somit können wir sagen, dass unsere Ziele, welche wir uns im Pflichtenheft gesetzt haben, erfüllt sind. Für nachfolgende Weiterentwicklungen der Ladestufe empfiehlt es sich, einen Lade-IC zu verwenden, welcher eine grössere Eingangsspannung verarbeiten kann. Die Verwendung eines LT1512 hat den Vorteil, dass die Eingangsspannung zwischen $2.7V - 25V$ variieren kann. Dieser Grosse Spannungsbereich hat jedoch zur Folge, dass die Grösse des Bauteils $(L \times B \times H)$ mit $(6.2\times 5\times 1.7)mm$ eher gross ausfällt. Trotz seiner grossen Bauform überwiegt hierbei aber der Vorteil mit der hohen Versorgungsspannung.\\
Desweiteren würde es sich Lohnen die Spulen zu optimieren. Die eingebauten Flachspulen sind zwar platzsparen, kommen jedoch aufgrund ihrer Bauform ziemlich schnell an ihr Leistungsmaximum. Hier würden sich solche Spulen sich empfehlen, wie sie z.B. auch in modernen elektrischen Zahnbürsten verwendet werden. Hierbei handelt es sich um zwei unterschiedlich grosse Ringspulen, von welchem die kleinere Tranceiver-Spule in der Ladeschaltung in die grössere Receiverspule  im Dojo gesteckt wird. Diese Ringspulen wären zwar ein wenig grösser, doch durch die grössere Bauform könnte die Ladeschaltung mit grösseren Strömen betrieben und damit auch der Dojo noch schneller geladen werden.\\
Mit der Verwendung des komplexen und leistungsfähigen Mikrocontrollers NRF52832 können alle Prozesse zentral gesteuert werden und dadurch entfallen weitere Controller. Ebenfalls kann dadurch der Energieverbrauch gesenkt werden und die Verwendung eines zusätzlichen Bluetooth-Moduls entfällt.
=======
\textbf{Software}
\begin{itemize}
	\item Firmware und Testsoftware gemäss den funktionellen Anforderungen
\end{itemize}
 
Da nun die Anforderungen noch einmal klar dargestellt wurden, folgt ein Einblick in die erfüllten und nicht erfüllten Punkte, wie auch ein Ausblick in mögliche Weiterentwicklungen.
 
Die Hardwarekomponenten wie induktive Ladeschaltung, Batterie, Microcontroller, sowie weitere notwendige Komponenten für die Audioausgabe wurden in einem ersten Schritt auf einen Prototypen gebaut, welcher zwar massiv grösser ist als das finale Produkt, jedoch die Funktionalität veranschaulichen soll. Die einzelnen Komponenten wurden dabei alle so klein gewählt, dass sie ohne weiteres im Innenraum des Dojos platziert werden können. Ein bereits vorgefertiges PCB Layout \ref{fig:Dojo_layout} stellt dabei ein passendes Gesamtkonstrukt dar.\\

Die implementierte Batterie versorgt alle eingebauten Geräte mit genügend Energie und ermöglicht eine Laufzeit von rund 6 Stunden. Die Aufladung erfolgt mittels induktiver Ladung, wodurch mit Absprache des Auftraggebers auf die USB-Verbindung verzichtet werden konnte. Die induktive Ladung funktioniert einwandfrei und ermöglicht eine Stromübertragung von maximal 70mA. Somit können wir sagen, dass unsere Ziele, welche wir uns im Pflichtenheft gesetzt haben, erfüllt sind.\\

Mit dem bereits erwähnten Verzicht einer USB-Schnittstelle besteht keine Möglichkeit die SD-Karte ohne weiteres zu aktualisieren oder den Inhalt im Allgemeinen zu verändern. Daher sieht das Konzept vor, die SD-Karte manuell zu entnehmen und dann über einen extra dafür vorgesehenen SD-Karten-Hub zu aktualisieren. Dadurch lassen sich mehrere SD-Karten gleichzeitig bearbeiten, wobei eine signifikanten Zeiteinsparung für die Betreiber erzielt werden kann. Weiter wird die SD-Karte im Gehäuse auch so angebracht, dass eine einfache Entnahme ohne Werkzeug oder Ähnliches möglich ist.
Es gilt zu erwähnen, dass es theoretisch möglich gewesen wäre eine USB-Schnittstelle für die Datenübertragung und auch Energieversorgung zu implementieren. Man musste sich allerdings auch die Frage stellen ob es dann noch Sinn macht, den Dōjō überhaupt induktiv zu laden. Beide Eigenschaften sind unmittelbar miteinander verknüpft, wobei die Entscheidung schlussendlich auf die induktive Ladung fiel.\\

Die Lokalisierung von Bluetooth Beacons funktioniert einwandfrei. Das Detektieren erfolgt über die Software. Mit einem geeigneten Algorithmus wird jeweils das Beacon mit dem stärksten Signal als das\glqq korrekte\grqq Kunstobjekt identifiziert. Das integrierte Bluetooth-Modul im Mikrocontroller ermöglicht das Empfangen der entsprechenden Beacon-ID und kann diese über eine geeignete Funktion in eine Hexadezimal-Zahl wandeln. Anschliessend wird mit einer ID-Liste auf der SD-Karte verglichen und bei Übereinstimmung das entsprechende Audio-File abgespielt. Problematisch ist, dass die Beacons die Audioausgabe durch ein Knacken stören\\

Das Abspielen einer Audiodatei funktioniert, solange es eine Datei vom Typ WAV Unsigned 8-bit PCM handelt. Damit dies funktioniert, muss auch von der SD-Karte gelesen werden. Dies und das Schreiben auf die SD-Karte konnten auch wunschgemäss implementiert werden. Im Pflichtenheft wurde definiert, dass maximal 214mW RMS am Knochenschallaktor vorhanden sind. Im Prototyp sind es nun 649.25mW RMS. Dies übersteigt den definierten Wert, ist aber dennoch gut. Der Wert wurde definiert um ein Audiosignal zu erhalten, welches sich nicht überschlägt. Da dies beim Prototyp mit 650mW RMS Leistung am Knochenschallaktor so ist, ist das Ziel trotzdem erreicht. \\
>>>>>>> 49e86d01b3b520d81c88d4129a6ffe7e3e06eb68
 
\textbf{b) Was läuft nicht?Wo besteht Verbesserungsbedarf? Was konnte nicht realisiert werden? Hier ist eine kurze Angabe der Gründe sinnvoll.}
<<<<<<< HEAD
Mit dem Verzicht einer USB-Schnittstelle besteht keine Möglichkeit die SD-Karte ohne weiteres zu aktualisieren oder den Inhalt im Allgemeinen zu verändern. Daher sieht das Konzept vor, die SD-Karte manuell zu entnehmen und dann über einen extra dafür vorgesehenen SD-Karten-Hub zu aktualisieren. Dadurch lassen sich mehrere SD-Karten gleichzeitig bearbeiten und führt damit zu einer signifikanten Zeiteinsparung für die Betreiber. Weiter wird die SD-Karte im Gehäuse auch so angebracht, dass eine einfache Entnahme ohne Werkzeug oder Ähnliches möglich ist. Theoretisch wäre es möglich gewesen eine USB-Schnittstelle zu implementieren. Allerdings muss man sich dann auch unmittelbar die Frage stellen ob es dann noch Sinn macht, den Dōjō induktiv zu laden. Beide Eigenschaften sind unmittelbar miteinander verknüpft. Die Entscheidung fiel dann auf die induktive Ladung der Anwendung.
 
\textbf{c) Optimierungs- / Weiterentwicklungsmöglichkeiten: Welche Optimierungsmöglichkeiten bestehen? Was könnte wie besser gemacht werden? Was muss bei einer Weiterentwicklung bedacht werden?}
Eine Weiterentwicklung des aktuellen Konzepts ist durchaus sinnvoll. Nachdem die Basis des Dōjō umgesetzt und getestet wurde, ist viel technisches \glqq Know-How \grqq vorhanden. Mögliche Weiterentwicklungsmöglichkeiten sind nachfolgend aufgelistet.\\
Einerseits kann eine Aktualisierung der SD-Karte über ein drahtloses Netzwerk wie z.B Bluetooth oder W-LAN umgesetzt werden. Dadurch liesse sich jeglicher Kontakt mit der SD-Karte durch einen Mitarbeiter vermeiden. Fraglich ist an dieser Stelle jedoch in welchem Umfang Aktualisierungen vorgenommen werden, da die drahtlose Datenübertragung nicht unbegrenzt Daten übermitteln kann.\\
Eine weitere Möglichkeit ist die Umsetzung eines integrierten Tickets. Dieses wurde im Verlaufe des Berichts weder erläutert noch umgesetzt. Die automatische Zutrittsberechtigung zu verschiedenen Ausstellungsbereiche, ermöglicht einen individuellen Museumsbesuch. Die Software dazu, ist jedoch im Moment noch nicht für dieses Szenario ausgelegt und benötigt bei einer Implementation noch einiges an Aufwand.\\
Ein weiterer Punkt welcher mit weitaus geringerem Aufwand implementiert werden könnte, ist die Signalisation mittels LED Leiste. Im Moment wird noch eine LED ohne rgb angesteuert. Das Ansprechen einer RGB Leuchtdiode ist softwaretechnisch jedoch programmiert und müsste für die Funktionalität nur noch im Dojo eingebaut werden. 
=======

Es konnte keine Lautstärkeregelung implementiert werden, da dies in der Software umgesetzt werden sollte. Da aber zu viel Zeit für die Audioausgabe an sich benötigt wurde, blieb keine Zeit mehr um dies zu implementieren. Eine kluge Ausgabe der like-Liste wurde ebenfalls nicht implementiert. Zur Zeit muss dafür die SD-Karte entfernt werden. Die kluge implementierung wird nachfolgend unter c) beschrieben.  Auch muss hier erwähnt werden, dass keines der im Pflichtenheft definierten Wunschziele umgesetzt wurde.

Das Zusammenspiel zwischen Batterie und MC fehlt komplett. Eine überwachung der Batterie ist nicht realisiert worden sowie eine Erkennung, die erkennt falls sich der Dojo in einer Ladestation befindet.

Die Software enthält Code-Stellen die nicht sehr flexibel aufgebaut sind. Dies sind vor allem Switch-Case Abfragen, welche das Programm statisch machen.
 
\textbf{c) Optimierungs- / Weiterentwicklungsmöglichkeiten: Welche Optimierungsmöglichkeiten bestehen? Was könnte wie besser gemacht werden? Was muss bei einer Weiterentwicklung bedacht werden?}

Eine Weiterentwicklung des aktuellen Konzepts ist durchaus sinnvoll. Nachdem die Basis des Dōjō umgesetzt und getestet wurde, ist viel technisches \glqq Know-How \grqq vorhanden.\\
Obwohl die induktive Energieübertragung einwandfrei funktioniert, lohnt es sich in einem weiteren Schritt diese noch zu verbessern. Für nachfolgende Weiterentwicklungen der Ladestufe empfiehlt es sich, einen Lade-IC zu verwenden, welcher eine grössere Eingangsspannung verarbeiten kann. Die Verwendung des LT1512 hätte den Vorteil, dass die Eingangsspannung zwischen $2.7V - 25V$ variieren kann. Die grosse Leistungsfähigkeit dieses Bauteils hat zwar zur Folge dass die Grösse des Bauteils $(L \times B \times H)$ mit $(6.2\times 5\times 1.7)mm$ eher gross ausfällt, sein Vorteil mit dem hohen Versorgungsspannungsbereich überwiegt jedoch. Desweiteren würde es sich lohnen die Spulen zu optimieren. Die eingebauten Flachspulen sind zwar platzsparend, kommen jedoch aufgrund ihrer Bauform ziemlich schnell an ihr Leistungsmaximum. Hier würden sich solche Spulen sich empfehlen, wie sie z.B. auch in modernen elektrischen Zahnbürsten verwendet werden. Hierbei handelt es sich um zwei unterschiedlich grosse Ringspulen, von welchem die kleinere Tranceiver-Spule in der Ladeschaltung in die grössere Receiverspule  im Dōjō gesteckt wird. Diese Ringspulen wären zwar ein wenig grösser, doch durch die grössere Bauform könnte die Ladeschaltung mit grösseren Strömen betrieben und damit auch der Dōjō noch schneller geladen werden.\\
Bei der Audioausgabe könnte die Qualität des Audiosignals verbessert werden. Hierbei wäre es sinnvoll ein anderes Dateiformat zu wählen. Dabei gibt es verschiedene Möglichkeiten. Unser Vorschlag wäre ein WAV (Microsoft) signed 16-bit PCM zu verwenden.\\
Einerseits kann eine Aktualisierung der SD-Karte über ein drahtloses Netzwerk wie z.B Bluetooth oder W-LAN umgesetzt werden. Dadurch liesse sich jeglicher Kontakt mit der SD-Karte durch einen Mitarbeiter vermeiden. Fraglich ist an dieser Stelle jedoch in welchem Umfang Aktualisierungen vorgenommen werden, da die drahtlose Datenübertragung nicht unbegrenzt Daten übermitteln kann. Diese drahtlose Übertragung würde auch das kluge auslesen der like-Liste ermöglichen.\\
Eine weitere Möglichkeit ist die Umsetzung eines integrierten Tickets. Dieses wurde im Verlaufe des Berichts weder erläutert noch umgesetzt. Die automatische Zutrittsberechtigung zu verschiedenen Ausstellungsbereiche, ermöglicht einen individuellen Museumsbesuch. Die Software dazu, ist jedoch im Moment noch nicht für dieses Szenario ausgelegt und benötigt bei einer Implementation noch einiges an Aufwand.\\
Mit weitaus geringerem Aufwand könnte die Signalisation mittels LED Leiste implementiert werden. Im Moment wird noch eine gelbe LED angesteuert. Das Ansprechen einer RGB Leuchtdiode ist softwaretechnisch jedoch bereits programmiert und müsste für die Funktionalität nur noch im Dōjō eingebaut werden.
>>>>>>> 49e86d01b3b520d81c88d4129a6ffe7e3e06eb68
